<!doctype html><html lang=ja dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.111.3"><meta name=generator content="Relearn 5.12.5+tip"><meta name=description content="ホームページ"><meta name=author content="KATO Jinnosuke"><title>ものコン wiki :: ものコン-wiki</title><link href=https://jinnosukekato.github.io/monokon-wiki/index.html rel=canonical type=text/html title="ものコン wiki :: ものコン-wiki"><link href=https://jinnosukekato.github.io/monokon-wiki/css/fontawesome-all.min.css?1680689941 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://jinnosukekato.github.io/monokon-wiki/css/fontawesome-all.min.css?1680689941 rel=stylesheet></noscript><link href=https://jinnosukekato.github.io/monokon-wiki/css/nucleus.css?1680689941 rel=stylesheet><link href=https://jinnosukekato.github.io/monokon-wiki/css/auto-complete.css?1680689941 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://jinnosukekato.github.io/monokon-wiki/css/auto-complete.css?1680689941 rel=stylesheet></noscript><link href=https://jinnosukekato.github.io/monokon-wiki/css/perfect-scrollbar.min.css?1680689941 rel=stylesheet><link href=https://jinnosukekato.github.io/monokon-wiki/css/fonts.css?1680689941 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://jinnosukekato.github.io/monokon-wiki/css/fonts.css?1680689941 rel=stylesheet></noscript><link href=https://jinnosukekato.github.io/monokon-wiki/css/theme.css?1680689941 rel=stylesheet><link href=https://jinnosukekato.github.io/monokon-wiki/css/theme-relearn-light.css?1680689941 rel=stylesheet id=variant-style><link href=https://jinnosukekato.github.io/monokon-wiki/css/variant.css?1680689941 rel=stylesheet><link href=https://jinnosukekato.github.io/monokon-wiki/css/print.css?1680689941 rel=stylesheet media=print><link href=https://jinnosukekato.github.io/monokon-wiki/css/format-print.css?1680689941 rel=stylesheet><link href=https://jinnosukekato.github.io/monokon-wiki/css/ie.css?1680689941 rel=stylesheet><script src=https://jinnosukekato.github.io/monokon-wiki/js/url.js?1680689941></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/variant.js?1680689941></script>
<script>window.index_js_url="https://jinnosukekato.github.io/monokon-wiki/index.search.js";var root_url="https://jinnosukekato.github.io/monokon-wiki/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="クリップボードにコピー",window.T_Copied_to_clipboard="クリップボードにコピー!",window.T_Copy_link_to_clipboard="リンクをクリップボードにコピー",window.T_Link_copied_to_clipboard="リンクをクリップボードにコピーしました!",window.T_No_results_found="\u0022{0}\u0022 の結果が見つかりません",window.T_N_results_found="\u0022{0}\u0022 で {1} 件の結果が見つかりました",baseUriFull="https://jinnosukekato.github.io/monokon-wiki/",window.variants&&variants.init(["relearn-light","relearn-dark"])</script></head><body class="mobile-support print" data-url=https://jinnosukekato.github.io/monokon-wiki/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='メニュー (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>ものコン wiki</span><meta itemprop=position content="1"></li></ol></div></div></nav><main id=body-inner class="highlightable home" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=home><h1 id=ものコン-wiki>ものコン wiki</h1><h2 id=about>About</h2><p>ものコンに関することをまとめたWIKIです</p><p><strong>大会概要などは、公式な情報を必ず参照してください！</strong></p><p>ものコン全国大会公式サイトは<a href=http://zenkoukyo.or.jp/index_contest/mono_index/ target=_blank>こちら</a></p><h2 id=features>Features</h2><p>サイドメニューの検索より、全文検索が可能です<br>また、タグ一覧より、各ページにつけられたタグからページを参照することもできます</p><h2 id=初心者の方へ>初心者の方へ</h2><p>基礎的なことが書いてあるページは<a href=https://jinnosukekato.github.io/monokon-wiki/tags/%e5%9f%ba%e7%a4%8e>基礎</a>のタグをつけています<br>基礎のタグがついているページをまず読んでいただくと良いかと思います</p><p>また、分からないことがあったら先輩に聞いてみましょう<br>ググるよりも聞いたほうが正確で手っ取り早いことが多々あります</p><p>また、<a href=https://jinnosukekato.github.io/monokon-wiki/problem-collection>問題集</a>も用意しましたので、時間のあるときに過去問と並行して解いてみてください</p><h2 id=arduino-ide-ダウンロードページ>Arduino IDE ダウンロードページ</h2><p><a href=https://www.arduino.cc/en/software target=_blank>https://www.arduino.cc/en/software</a><br>上記のサイトから2.x.xのバージョン(1.x.xではないほう)をダウンロードして使ってください</p><h2 id=ピン番号について>ピン番号について</h2><p>ピン番号は UNO と MEGA で違うので、あえてサンプル内で記述しないようにしています<br>詳しくは<a href=https://jinnosukekato.github.io/monokon-wiki/hardware/pin-assignment>ピン対応表</a>を参照してください</p><h2 id=この-wiki-のリポジトリ>この WIKI のリポジトリ</h2><p><a href=https://github.com/jinnosukeKato/monokon-wiki target=_blank>https://github.com/jinnosukeKato/monokon-wiki</a></p><h2 id=加筆修正依頼>加筆修正依頼</h2><p>この WIKI 内で何か間違っていたり、加筆してほしい部分があればリポジトリに issue を立てるか連絡してください</p><footer class=footline></footer></article><section><h1 class=a11y-only>ものコン wikiのサブセクション</h1><article class=default><h1 id=ものコンとは>ものコンとは</h1><p>このページでは、ものコン(電子回路組立部門)がどんなことをするのか簡単に説明します</p><h2 id=正式名称>正式名称</h2><p>正式名称は <strong>高校生ものづくりコンテスト(電子回路組立部門)</strong> と言います</p><p>通称 <strong>ものコン</strong> です</p><h2 id=部門概要>部門概要</h2><p>様々ある部門の中で私たちは電子回路組立部門に出場します</p><p>電子回路組立部門は入力回路基板とプログラムを作成して、制御対象装置と呼ばれるDCモーター、ステッピングモーター、ブザー、2つの7セグメントが搭載された
基盤に問題で指定された動作を行わさせる部門です</p><p>大会で上位を目指すには、プログラミングの知識、技術はもちろん、はんだづけの技術や電子回路に関する知識も必要です</p><h2 id=大会の流れ>大会の流れ</h2><p>ものコンには県大会、関東大会、全国大会があります</p><p>県大会(一人部門)で3位以上に入賞すると、関東大会に県代表として進むことができます<br>また、関東大会で優勝すると全国大会に進むことができます</p><footer class=footline></footer></article><article class=default><h1 id=ソフトウェア>ソフトウェア</h1><p>このセクションでは、Arduino言語やソフトウェアについて解説します</p><footer class=footline></footer></article><section><h1 class=a11y-only>ソフトウェアのサブセクション</h1><article class=default><h1 id=構文>構文</h1><p>このセクションでは、Arduino言語の構文などについて解説します</p><footer class=footline></footer></article><section><h1 class=a11y-only>構文のサブセクション</h1><article class=default><h1 id=基礎構文>基礎構文</h1><h2 id=setuphttpswwwarduinoccreferenceenlanguagestructuresketchsetup><a href=https://www.arduino.cc/reference/en/language/structure/sketch/setup/ target=_blank>setup()</a></h2><p>この関数はプログラムが実行されたあとに<strong>一度だけ</strong>呼び出されます</p><p>この関数の中には <a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/pinmode><code>pinMode</code></a> など最初に一度だけ行えばよい処理を記述します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// 2番ピンをアウトプットとして指定する
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    pinMode(<span style=color:#ae81ff>2</span>, OUTPUT);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=loophttpswwwarduinoccreferenceenlanguagestructuresketchloop><a href=https://www.arduino.cc/reference/en/language/structure/sketch/loop/ target=_blank>loop()</a></h2><p>この関数は <a href=#setup><code>setup()</code></a> が呼び出された後に名前の通り<strong>繰り返し</strong>実行されます</p><p>プログラムの主な処理内容はこの関数の中に記述します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// 1秒おきに4番ピンに接続されたブザーを440Hzで鳴らす
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>loop</span>() {
</span></span><span style=display:flex><span>    tone(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>440</span>);
</span></span><span style=display:flex><span>    delay(<span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>    noTone(<span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>    delay(<span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=変数>変数</h1><p>変数とは、値を格納できる箱のようなものです</p><p>実際には、変数を宣言することによって、指定された型の分だけメモリ空間を確保し、そのメモリ空間へのアドレスに対して変数名のエイリアスをつけることが行われています</p><h2 id=宣言>宣言</h2><p>Arduino言語では以下のようにして変数を宣言します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>型 任意の変数名;
</span></span></code></pre></div><p>具体的には以下のようになります</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// int型のvariableという変数を宣言する
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> variable;
</span></span></code></pre></div><p>同一の型であれば複数の変数を同時に宣言することも可能です</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// int型の first, second, thirdの3つの変数を一行で宣言する
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> first, second, third;
</span></span></code></pre></div><h2 id=型>型</h2><p>変数の宣言時に指定する型によって格納可能な値の大きさが変わります<br>もっともよく使う <code>int</code> 型であれば、基本的には-2の15乗から、2の15乗-1まで格納することができます</p><p>ものコンでは、符号付整数を格納できる <code>int</code> や、真偽値を格納できる <code>bool</code> をよく使います<br><del>某H先生はint型のことを実数型と教えてきましたが、それは間違っているので注意してください</del></p><p><code>int</code> や <code>bool</code> 以外にも様々な型がArduino言語には存在します<br><a href=https://www.arduino.cc/reference/en#data-types target=_blank>公式リファレンスの型一覧</a><br>これらの型はケースバイケースで使い分けます</p><h2 id=値の代入>値の代入</h2><p>変数には <code>=</code> を用いて値を格納することができます<br>変数に値を格納することを、<strong>代入</strong>といいます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// int型の変数variableに1を代入する
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> variable;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>variable <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span></code></pre></div><p>また、変数の宣言と同時に値を代入することもできます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// int型のvarという変数を宣言し、1を代入
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> var <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span></code></pre></div><h2 id=変数を用いた演算>変数を用いた演算</h2><p>変数は式の一部に用いることができます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> one <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> two <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// oneとtwoの足し算の結果をsumに代入
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> sum <span style=color:#f92672>=</span> one <span style=color:#f92672>+</span> two;
</span></span></code></pre></div><h2 id=スコープ>スコープ</h2><p>宣言した変数や関数が有効な範囲のことを、スコープと呼びます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> max <span style=color:#f92672>=</span> <span style=color:#ae81ff>123</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ここでも max は使える
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>int</span> foo <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ここでは foo は使えない
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>loop</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ここでも max は使える
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// ここでは foo は使えない
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>このように、変数には<strong>宣言したブロック( <code>{}</code> で囲まれた部分)より外では使うことができない</strong>というルールがあります</p><p>この使用できる範囲のことを<strong>スコープ</strong>と呼びます</p><p>また、同一のスコープの中では同じ名前を変数につけることはできません</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> hoge <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setup</span>(){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> hoge <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>; <span style=color:#75715e>// ここで上書きされてしまう
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=演算子>演算子</h1><p>演算子を用いることで様々な演算を行うことができます</p><p>Arduino言語には様々な演算子がありますが、このセクションでは算術演算子、比較演算子、論理演算子と一部の複合演算子の説明を行います</p><h3 id=算術演算子>算術演算子</h3><p>数値を<strong>計算</strong>することのできる演算子です</p><table><thead><tr><th>算術演算子</th><th>例</th><th>例の演算結果</th><th>意味</th></tr></thead><tbody><tr><td>+</td><td>1 + 2</td><td>3</td><td>足し算</td></tr><tr><td>-</td><td>2 - 1</td><td>1</td><td>引き算</td></tr><tr><td>*</td><td>2 * 2</td><td>4</td><td>掛け算</td></tr><tr><td>/</td><td>10 / 5</td><td>2</td><td>割り算</td></tr><tr><td>%</td><td>3 % 2</td><td>1</td><td>割り算の余り</td></tr><tr><td>=</td><td>a = 5</td><td>aは5</td><td>代入</td></tr></tbody></table><h3 id=複合演算子>複合演算子</h3><p>変数に対して<strong>代入と計算</strong>を同時に行うことのできる演算子です<br>複合演算子を使うことでプログラムを簡潔に記述することができます</p><table><thead><tr><th>複合演算子</th><th>例</th><th>意味</th></tr></thead><tbody><tr><td>++</td><td>a++</td><td>a = a + 1</td></tr><tr><td>&ndash;</td><td>a&ndash;</td><td>a = a - 1</td></tr><tr><td>+=</td><td>a += 2</td><td>a = a + 2</td></tr><tr><td>-=</td><td>a -= 2</td><td>a = a - 2</td></tr><tr><td>*=</td><td>a *= 2</td><td>a = a * 2</td></tr><tr><td>/=</td><td>a /= 2</td><td>a = a / 2</td></tr><tr><td>%=</td><td>a %= 2</td><td>a = a % 2</td></tr></tbody></table><p><code>++</code> (インクリメント)と <code>--</code> (デクリメント)は <code>++a</code> のように、変数の前に置くこともできますが、意味が変わります</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> b <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>=</span> b<span style=color:#f92672>++</span>; <span style=color:#75715e>// a = 1, b = 2 となり、代入=&gt;インクリメント となる
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>=</span> <span style=color:#f92672>++</span>b; <span style=color:#75715e>// a = 2, b = 2 となり、インクリメント=&gt;代入 となる
</span></span></span></code></pre></div><p>上記の例のように、インクリメントやデクリメントをした変数の値をほかの変数に代入する場合に、代入結果が変わることに注意してください</p><h3 id=比較演算子>比較演算子</h3><p>二つの値を<strong>比較</strong>することができる演算子です</p><p>主に <a href=https://jinnosukekato.github.io/monokon-wiki/software/syntax/conditional-branch/#if%e6%96%87>if文</a>
で使用します</p><table><thead><tr><th>比較演算子</th><th>例</th><th>意味</th></tr></thead><tbody><tr><td>==</td><td>a == b</td><td>aとbが等しいか</td></tr><tr><td>!=</td><td>a != b</td><td>aとbが等しくないか</td></tr><tr><td>&lt;</td><td>a &lt; b</td><td>aはb未満か</td></tr><tr><td>></td><td>a > b</td><td>aはbより大きいか</td></tr><tr><td>&lt;=</td><td>a &lt;= b</td><td>aはb以下か</td></tr><tr><td>>=</td><td>a >= b</td><td>aはb以上か</td></tr></tbody></table><p>演算の結果は <code>bool</code> で返ってくるので変数に代入することも可能です</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>bool</span> var <span style=color:#f92672>=</span> a <span style=color:#f92672>==</span> b;
</span></span></code></pre></div><h3 id=論理演算子>論理演算子</h3><p>真偽値(boolean)を扱うことができる演算子です<br><strong>論理演算</strong>を行います</p><p>複数の条件を組み合わせた分岐処理を作成したいときなどに使用します</p><table><thead><tr><th>論理演算子</th><th>例</th><th>意味</th></tr></thead><tbody><tr><td>!</td><td>!a</td><td>NOT</td></tr><tr><td>&&</td><td>a && b</td><td>AND</td></tr><tr><td>||</td><td>a || b</td><td>OR</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>bool</span> t <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> f <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> not <span style=color:#f92672>=</span> <span style=color:#f92672>!</span>t; <span style=color:#75715e>// false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>bool</span> and <span style=color:#f92672>=</span> t <span style=color:#f92672>&amp;&amp;</span> f; <span style=color:#75715e>// false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>bool</span> or <span style=color:#f92672>=</span> t <span style=color:#f92672>||</span> f; <span style=color:#75715e>// true
</span></span></span></code></pre></div><p>また、これらの演算子を用いた式は <code>()</code> でまとめることができます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>bool</span> exam <span style=color:#f92672>=</span> (true <span style=color:#f92672>&amp;&amp;</span> false) <span style=color:#f92672>||</span> (false <span style=color:#f92672>||</span> true); <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> n <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>9</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>); <span style=color:#75715e>// 10
</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=条件分岐>条件分岐</h1><p>条件分岐文は、その名の通り、ある条件を評価し、処理を分岐させる文です</p><p>例えば、センサーの値や変数の値によって処理を変えたいときに使用します</p><h2 id=if文>if文</h2><p>与えられた条件によって処理内容を変える文です</p><p>条件は <code>bool</code> 型で与えます<br>各種スイッチなどの入力値を与えたり、
<a href=https://jinnosukekato.github.io/monokon-wiki/software/syntax/operators/#%e6%af%94%e8%bc%83%e6%bc%94%e7%ae%97%e5%ad%90>比較演算子</a> と <a href=https://jinnosukekato.github.io/monokon-wiki/software/syntax/operators/#%e8%ab%96%e7%90%86%e6%bc%94%e7%ae%97%e5%ad%90>論理演算子</a>
と入力値を組み合わせたりして条件を与えます</p><p><code>else if</code> 句によって一つ目の条件に合致しない場合、別の条件を与えて分岐させることもできます<br><code>else if</code> 句は複数回連続して記述することが可能です</p><p>また、<code>else</code> 句によってどの条件にも合致しない場合の処理を記述することもできます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>if</span> (a <span style=color:#f92672>!=</span> b) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// aがbと等しくない場合の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (a <span style=color:#f92672>==</span> b) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// aがbと等しい場合の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// aがbと等しくない場合の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (a <span style=color:#f92672>==</span> b) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// aがbと等しい場合の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>if</span> (a <span style=color:#f92672>&lt;</span> b) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// aがbと等しくないかつ、aがbより小さい場合の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>if</span> (a <span style=color:#f92672>!=</span> <span style=color:#ae81ff>42</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// aがbと等しくないかつ、aがbより小さくなく、aが42ではない場合の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 上の3つの条件すべてに当てはまらない場合の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (a <span style=color:#f92672>==</span> b <span style=color:#f92672>&amp;&amp;</span> a <span style=color:#f92672>!=</span> c) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// aがbと等しいかつ、 aがcと等しくない場合の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h2 id=switch文>switch文</h2><p>与えられた変数がどの値かによって処理を変える文です</p><p><a href=#if%e6%96%87>if文</a> は条件で分岐するのに対し、 <code>switch</code> 文 は一つの変数がどの値かという点で処理を分岐します</p><p><code>case</code> 句の後に分岐させる場合の定数を書きます</p><p>処理の終わりには必ず <code>break</code> 文を書きます<br><code>break</code> 文がない場合、次の <code>break</code> 文までに記述されている処理すべてが行われます</p><p><code>default</code> 句の後にはどの条件にも当てはまらない場合に実行される内容を書きます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> x <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> (x) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// xが1の時の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// xが2の時の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// x が3か4の時の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// どの条件にも当てはまらないときの処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=反復処理>反復処理</h1><p>同じような処理を繰り返して実行するようなときには繰り返し文を使用します</p><p>繰り返し文を使用することで、プログラムの行数を削減し、プログラムを記述する手間を削減することができます。<br>また、簡潔なプログラムを書くことにもつながります</p><h2 id=for文>for文</h2><p>任意の処理を任意の回数繰り返して実行することができる文です</p><p>繰り返しの条件は文頭で宣言する変数によって行います<br>この変数をfor文の中で使用することもできます</p><p><code>break</code> 文が処理中にあった場合、ループを強制的に抜け出します<br><code>continue</code> 文が処理中にあった場合には、 <code>continue</code> 文以降の処理を一度スキップしてループを続けます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#960050;background-color:#1e0010>変数の初期化</span>; <span style=color:#960050;background-color:#1e0010>ループ継続条件</span>; <span style=color:#960050;background-color:#1e0010>変数の増加もしくは減少処理</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 繰り返す処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// iが0から9まで10回繰り返す
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>9</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 10回繰り返される処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h2 id=while文>while文</h2><p>任意の処理を条件が真になるまで繰り返して実行する文です<br>条件は <a href=https://jinnosukekato.github.io/monokon-wiki/software/syntax/conditional-branch/#if%e6%96%87>if文</a> と同じように指定します</p><p><code>break</code> 文が処理中にあった場合、ループを強制的に抜け出します<br><code>continue</code> 文が処理中にあった場合には、 <code>continue</code> 文以降の処理を一度スキップしてループを続けます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// 22番ピンのスイッチの値がHIGHの間何かしらの処理を行う
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SWITCH_PIN <span style=color:#f92672>=</span> <span style=color:#ae81ff>22</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> (digitalRead(SWITCH_PIN) <span style=color:#f92672>==</span> HIGH) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 何かしらの処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h2 id=for-each文>for-each文</h2><p>for-each文は <a href=#for%e6%96%87>for文</a> を拡張した構文です</p><p>配列の要素をひとつづつ取り出して、その値を処理したいときに使用します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>for</span>(<span style=color:#960050;background-color:#1e0010>配列の値の型</span> <span style=color:#960050;background-color:#1e0010>内部変数名</span><span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>配列名</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>通常の <a href=#for%e6%96%87>for文</a> でそのような処理を記述する場合、以下の例のように、配列の長さを事前に知っている必要があります</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> length <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> array[length] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> length; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// iがlengthを超えた場合バグが発生する
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    tone(<span style=color:#ae81ff>4</span>, array[i] <span style=color:#f92672>*</span> <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>    delay(<span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>    noTone(<span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>上の例を for-each文を利用して記述した例を下に示します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> length <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// lengthはここしか使用しない
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> array[length] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i: array) {
</span></span><span style=display:flex><span>    tone(<span style=color:#ae81ff>4</span>, array[i] <span style=color:#f92672>*</span> <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>    delay(<span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>    noTone(<span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>この構文は主にピンの初期化などに有効です</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> OUTPUT_PINS <span style=color:#f92672>=</span> {<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>13</span>, <span style=color:#ae81ff>14</span>, <span style=color:#ae81ff>15</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i: OUTPUT_PINS) {
</span></span><span style=display:flex><span>    pinMode(i, OUTPUT);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=関数>関数</h1><p>プログラムを書いているときに、同じ処理を何度も別の場所で行うことがよくあります<br>例えば、ステッピングモーターを回すなどです</p><p>処理の行数が少なかったり、使用頻度が少ないものであれば、コピーペーストでもよいかもしれません<br>しかし、行数が多かったり、何度も行う処理をコピーペーストで書いてしまうと長く、読みづらいプログラムになってしまうので、関数としてまとめて宣言し、それを呼び出すようにします</p><p>また、動作が似ている処理を抽象化して、関数にすることでコードを書く手間を大幅に削減できます<br>7セグメントを点灯させる際に、各数字ごとに別の関数を用意する必要はありません<br>どの数字を点灯するかを引数に取り、数値によって動作を変えればよいのです</p><h2 id=宣言>宣言</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>返り値の型 関数名(引数の型 仮引数) {
</span></span><span style=display:flex><span>    処理
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>返り値とは処理の結果の値のことです<br>例えば、整数の足し算をする関数なら <code>int</code> 型を指定します<br>また、返り値がない場合(処理だけ行う)ときは <code>void</code> 型を指定します</p><p>引数は、関数の動作に必要な変数のことです<br>引数がいらない場合は省略できます<br><code>,</code> で区切って複数個指定することもできます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// 整数同士の足し算を行う関数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>int</span> a, <span style=color:#66d9ef>int</span> b) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> a <span style=color:#f92672>+</span> b; <span style=color:#75715e>// return句で返り値を返すことができる
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 呼び出せる
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> add(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>10</span>);
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// クロック書き込みを行う関数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>clock</span>() {
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, HIGH);
</span></span><span style=display:flex><span>    delay(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, LOW);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>また、名前が同じでも引数が違う複数個の関数を宣言する(オーバーロード)こともできます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// 5msで固定のクロック
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>clock</span>() {
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    delay(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 秒数を指定できるバージョン
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>clock</span>(<span style=color:#66d9ef>int</span> ms) {
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    delay(ms);
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=スコープ>スコープ</h2><p>関数にも<a href=https://jinnosukekato.github.io/monokon-wiki/software/syntax/variables/#%e3%82%b9%e3%82%b3%e3%83%bc%e3%83%97>変数</a>と同様にスコープの概念があるので、宣言の際には気を付けましょう</p><footer class=footline></footer></article><article class=default><h1 id=配列>配列</h1><p>配列は値を複数格納し、ひとまとめにすることができます<br>配列は、<a href=https://jinnosukekato.github.io/monokon-wiki/software/syntax/variables/>変数</a>を連続的にしたものと考えてください<br>変数が電車の一車両、配列が電車全体と思ってください</p><p>実際には、指定された型のサイズ*長さ分だけのメモリ空間をメモリ上に確保します<br>値の読み書きを行う際には、その空間の先頭アドレスに型のサイズ*インデックス文を加算したアドレスを参照します</p><h2 id=宣言>宣言</h2><p>宣言の際には、型名、配列名、 <code>[]</code> の中に配列の長さ(何個値を格納するか)を指定して宣言します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>型名 配列名[長さ];
</span></span></code></pre></div><p>宣言と同時に値を代入する場合は長さの指定を省略することもできます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> array[] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>}; <span style=color:#75715e>// 長さは2
</span></span></span></code></pre></div><p>値の代入には通常の変数と同様に <code>=</code> を使用します<br><code>{}</code> で囲み、 <code>,</code> で値を区切ります</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> array[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>};
</span></span></code></pre></div><p>配列内の値がすべて同じ場合はこのように代入することも可能です</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// すべて0の場合
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> array[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>0</span>};
</span></span></code></pre></div><p>また、宣言と代入を別々に行うこともできます</p><p>インデックスを指定することで代入ができますが、<strong>インデックスは0から始まる</strong>ので注意してください</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> array[<span style=color:#ae81ff>3</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>array[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>//    ↑ インデックス
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>array[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>7</span>;
</span></span><span style=display:flex><span>array[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span></code></pre></div><p>値を取り出す際も同じようにインデックスを指定します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> array[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 0番目の値を取り出す(値は1)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> first_num_of_array <span style=color:#f92672>=</span> array[<span style=color:#ae81ff>0</span>];
</span></span></code></pre></div><h2 id=二次元配列>二次元配列</h2><p>配列の中に配列を代入をすることもできます</p><p>変数を点、配列をx方向のみの一次元と捉えたうえで、配列を値に持つ配列はx-y平面として捉えることができるので、二次元配列と呼びます</p><p>宣言規則は通常の配列と同じですが、変数名の後に <code>[]</code> を2つつける必要があります</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// 最深部の値の型が int、外側の配列の長さ4、内側の長さ5の二次元配列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> two_dim_array[<span style=color:#ae81ff>4</span>][<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>34</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>12</span>},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>128</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>134</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>15</span>}
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>二次元配列は <a href=%e3%83%91%e3%83%bc%e3%83%84%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6#7%e3%82%bb%e3%82%b0%e3%83%a1%e3%83%b3%e3%83%88>7セグメント</a> や、 <a href=%e3%83%91%e3%83%bc%e3%83%84%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6#%e3%82%b9%e3%83%86%e3%83%83%e3%83%94%e3%83%b3%e3%82%b0%e3%83%a2%e3%83%bc%e3%82%bf%e3%83%bc>ステッピングモーター</a> の表示・回転パターンを表現するためによく使用します</p><footer class=footline></footer></article><article class=default><h1 id=定数>定数</h1><p>定数とは、一度しか代入できない<a href=https://jinnosukekato.github.io/monokon-wiki/software/syntax/variables/>変数</a>のことです</p><p>例えば7セグメントの点灯パターンなど、プログラム実行中に書き換えることのない変数は、頭に <code>const</code> を付けることで、再代入を防ぐことができます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> VAL <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>VAL <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>; <span style=color:#75715e>// 再代入のため、エラーが発生する
</span></span></span></code></pre></div><p>また、ファイルの最上部に <code>#define 定数名 値</code> と記述することでも定数宣言が可能です(置換マクロ)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>#define PI 3.14
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>5.0</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>5.0</span> <span style=color:#f92672>*</span> PI;
</span></span></code></pre></div><p>ただし、 <code>#define</code> を使用すると、ファイル内のすべての定数名に使用した語句が含まれる部分が置き換えられてしまうので、可能な限り <code>const</code> を使うようにしましょう</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>#define get 10
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>getNum</span>() {
</span></span><span style=display:flex><span>   <span style=color:#75715e>// この関数宣言のgetの部分も10に置き換えられてしまう
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><footer class=footline></footer></article></section><article class=default><h1 id=組み込み関数>組み込み関数</h1><p>使用頻度が高い組み込み関数について、ひとつづつ解説します</p><p>ここで紹介する関数以外にも様々な関数がArudino言語には
標準で用意されているので、 <a href=https://www.arduino.cc/reference/en/ target=_blank>Arduino公式リファレンス</a> も併せて読むことを推奨します</p><p>また、インターネット上には非公式日本語リファレンスもいくつかありますが、情報が古いことがあるので気を付けるようにしてください</p><footer class=footline></footer></article><section><h1 class=a11y-only>組み込み関数のサブセクション</h1><article class=default><h1 id=analogread>analogRead</h1><h2 id=リファレンスhttpswwwarduinoccreferenceenlanguagefunctionsanalog-ioanalogread><a href=https://www.arduino.cc/reference/en/language/functions/analog-io/analogread/ target=_blank>リファレンス</a></h2><h2 id=説明>説明</h2><p>指定したピンをアナログ値で読み取ります</p><h2 id=注意すべき点>注意すべき点</h2><p>返り値は最大10bitsの値です</p><p>2^10は1024なので0~1023の整数値が返ってきます</p><p>この関数で値を読み取ることができるのは <code>A0</code> などの　<code>A</code> から始まるピン番号のピンのみです</p><p>また、番号は <code>A0</code> のように <code>A</code> を含めて指定してください</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>analogRead(<span style=color:#960050;background-color:#1e0010>ピン番号</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// A0の値で周波数を変更
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> value <span style=color:#f92672>=</span> analogRead(A0);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span>(value <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>500</span>) {
</span></span><span style=display:flex><span>    tone(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>if</span>(value <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>524</span>) {
</span></span><span style=display:flex><span>    tone(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    tone(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>800</span>, <span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=delay>delay</h1><h2 id=リファレンスhttpswwwarduinoccreferenceenlanguagefunctionstimedelay><a href=https://www.arduino.cc/reference/en/language/functions/time/delay/ target=_blank>リファレンス</a></h2><h2 id=説明>説明</h2><p>指定したミリ秒の間、プログラム全体の動作を停止させます</p><h2 id=注意すべき点>注意すべき点</h2><p>プログラム全体が停止することに留意してください</p><p>例えば、待ち時間になにかしらの動作をさせたいにも関わらず、 <code>delay(1000)</code> などとすると、意図しない動作になってしまうことが多いです</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>delay(<span style=color:#960050;background-color:#1e0010>停止させたいミリ秒数</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 4番に接続されたブザーを440Hzで1000ms鳴らす
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> buzzer_pin <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> frequency <span style=color:#f92672>=</span> <span style=color:#ae81ff>440</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tone(buzzer_pin, frequency);
</span></span><span style=display:flex><span>delay(<span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>noTone(buzzer_pin);
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=digitalread>digitalRead</h1><h2 id=リファレンスhttpswwwarduinoccreferenceenlanguagefunctionsdigital-iodigitalread><a href=https://www.arduino.cc/reference/en/language/functions/digital-io/digitalread/ target=_blank>リファレンス</a></h2><h2 id=説明>説明</h2><p>指定したピンをデジタル値で読み取ります</p><h2 id=注意すべき点>注意すべき点</h2><p>読み取った値は <code>HIGH</code>, <code>LOW</code> として返ってきますが、booleanに代入可能です</p><p>入力基板によってプルアップ、プルダウンが違う場合があるので基盤を実際に確認をしてください</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>digitalRead(<span style=color:#960050;background-color:#1e0010>ピン番号</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// if文を使って22番ピンの値で分岐処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span>(digitalRead(<span style=color:#ae81ff>22</span>) <span style=color:#f92672>==</span> HIGH) {
</span></span><span style=display:flex><span>    tone(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>440</span>, <span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// スマートな記法(動作は上と同じ)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span>(digitalRead(<span style=color:#ae81ff>22</span>)) {
</span></span><span style=display:flex><span>    tone(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>440</span>, <span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 変数に値を代入
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>boolean value <span style=color:#f92672>=</span> digitalRead(<span style=color:#ae81ff>22</span>);
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=digitalwrite>digitalWrite</h1><h2 id=リファレンスhttpswwwarduinoccreferenceenlanguagefunctionsdigital-iodigitalwrite><a href=https://www.arduino.cc/reference/en/language/functions/digital-io/digitalwrite/ target=_blank>リファレンス</a></h2><h2 id=説明>説明</h2><p>ピンに対してデジタル出力(LOW, HIGH)を行います</p><h2 id=注意すべき点>注意すべき点</h2><p>一度HIGHを出力したピンはLOWを出力するまでHIGHが出力されつづけます</p><p>意図しないピンがHIGHになり続け、意図しない部品が動作することが多々あるので気を付けましょう</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>digitalWrite(<span style=color:#960050;background-color:#1e0010>ピン番号</span>, HIGH); <span style=color:#75715e>// HIGHを出力
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>digitalWrite(<span style=color:#960050;background-color:#1e0010>ピン番号</span>, LOW); <span style=color:#75715e>// LOWを出力
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 5番ピンを使用したクロック動作
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> clock_pin <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>digitalWrite(clock_pin, HIGH);
</span></span><span style=display:flex><span>delay(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>digitalWrite(clock_pin, LOW);
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=millis>millis</h1><h2 id=リファレンスhttpswwwarduinoccreferenceenlanguagefunctionstimemillis><a href=https://www.arduino.cc/reference/en/language/functions/time/millis/ target=_blank>リファレンス</a></h2><h2 id=説明>説明</h2><p>プログラムが書き込まれ、実行されてからの経過時間(ミリ秒)を返す関数です</p><h2 id=注意すべき点>注意すべき点</h2><p>返り値は <code>unsigned long</code> 型です</p><p><code>int</code> に値を代入することも可能ですが、 <code>unsigned long</code> は <code>int</code> や <code>long</code> と比べて保持可能なデータ量が大きいので、
長い時間を計測する場合などにエラーを引き起こす原因となることがあります</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> time <span style=color:#f92672>=</span> millis();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// delayを使わないクロック
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> start_ms;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// クロックを開始する関数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>clock_start</span>() {
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, HIGH);
</span></span><span style=display:flex><span>    start_ms <span style=color:#f92672>=</span> millis();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 定期実行してクロックを停止させる関数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span><span style=color:#960050;background-color:#1e0010>　</span>clock_check(<span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> duration) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(millis() <span style=color:#f92672>-</span> start_ms <span style=color:#f92672>&gt;=</span> duration) {
</span></span><span style=display:flex><span>        digitalWrite(<span style=color:#ae81ff>5</span>, LOW);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=notone>noTone</h1><h2 id=リファレンスhttpswwwarduinoccreferenceenlanguagefunctionsadvanced-ionotone><a href=https://www.arduino.cc/reference/en/language/functions/advanced-io/notone target=_blank>リファレンス</a></h2><h2 id=説明>説明</h2><p><a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/tone/><code>tone</code></a> で鳴らした音を消す関数です</p><h2 id=注意すべき点>注意すべき点</h2><p>特になし</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>noTone(<span style=color:#960050;background-color:#1e0010>ピン番号</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 4番で鳴らした音を1秒後に消す
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>tone(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>440</span>);
</span></span><span style=display:flex><span>delay(<span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>noTone(<span style=color:#ae81ff>4</span>);
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=pinmode>pinMode</h1><h2 id=リファレンスhttpswwwarduinoccreferenceenlanguagefunctionsdigital-iopinmode><a href=https://www.arduino.cc/reference/en/language/functions/digital-io/pinmode/ target=_blank>リファレンス</a></h2><h2 id=説明>説明</h2><p>指定したピンをインプットもしくはアウトプットとして設定します</p><p>入力を読み取る場合(スイッチやセンサー)にはインプットを、出力を行う場合にはアウトプットを指定してください</p><h2 id=注意すべき点>注意すべき点</h2><p><code>pinMode</code> 関数を使用しない場合でもプログラムが動作することがありますが、 <code>pinMode</code> 関数は内部インピーダンスを用途に合わせて切り替えているので、
なるべく指定するようにしてください</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>pinMode(<span style=color:#960050;background-color:#1e0010>ピン番号</span>, INPUT); <span style=color:#75715e>// インプットに指定
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>pinMode(<span style=color:#960050;background-color:#1e0010>ピン番号</span>, OUTPUT); <span style=color:#75715e>// アウトプットに指定
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// for-each文を用いた効率的な指定方法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> output_pins[] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>13</span>, <span style=color:#ae81ff>14</span>, <span style=color:#ae81ff>15</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i : output_pins) {
</span></span><span style=display:flex><span>    pinMode(i, OUTPUT);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=tone>tone</h1><h2 id=リファレンスhttpswwwarduinoccreferenceenlanguagefunctionsadvanced-iotone><a href=https://www.arduino.cc/reference/en/language/functions/advanced-io/tone/ target=_blank>リファレンス</a></h2><h2 id=説明>説明</h2><p>指定したピンに指定した周波数の信号を送る関数です</p><p>鳴らし続ける時間(ミリ秒)を指定することも可能です</p><h2 id=注意すべき点>注意すべき点</h2><p>鳴らし続ける時間を指定しなかった場合、 <a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/notone/><code>noTone</code></a> が実行されるまで音が鳴り続けます</p><p>時間を指定した場合、 <a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/delay/><code>delay</code></a> と違い、
時間が経過する間プログラムは停止しません</p><p>また、31Hz以下の周波数は生成できません</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>tone(<span style=color:#960050;background-color:#1e0010>ピン番号</span>, <span style=color:#960050;background-color:#1e0010>周波数</span>); <span style=color:#75715e>// 時間を指定しない場合
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>tone(<span style=color:#960050;background-color:#1e0010>ピン番号</span>, <span style=color:#960050;background-color:#1e0010>周波数</span>, <span style=color:#960050;background-color:#1e0010>時間</span>(<span style=color:#960050;background-color:#1e0010>ミリ秒</span>)); <span style=color:#75715e>// 時間を指定する場合
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ドの音を4番ピンで3秒間鳴らす
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>tone(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>440</span>, <span style=color:#ae81ff>3000</span>);
</span></span></code></pre></div><footer class=footline></footer></article></section><article class=default><h1 id=変数関数の命名>変数・関数の命名</h1><p>このページでは変数や関数の命名について解説します</p><p>より詳しく知りたい人は <a href=https://jinnosukekato.github.io/monokon-wiki/software/naming/www.amazon.co.jp/dp/4873115655>リーダブルコード</a> を読んでみてください</p><p>また、Arduino言語公式のスタイルガイド(英語)もあるので <a href=https://docs.arduino.cc/learn/contributions/arduino-writing-style-guide target=_blank>こちら</a> も読んでみてください</p><h2 id=様々な記述法>様々な記述法</h2><p>よく使われる識別子の記法はいくつかあります</p><p>識別子名とは変数や関数など、プログラマが好きな名前を付けられるものの名前のことです</p><table><thead><tr><th>記法名</th><th>例 (get dataという名前)</th><th>特徴</th></tr></thead><tbody><tr><td>アッパーキャメルケース (UCC)</td><td>GetData</td><td>単語を大文字で区切る</td></tr><tr><td>ローワーキャメルケース (LCC)</td><td>getData</td><td>単語を大文字で区切るが先頭は小文字</td></tr><tr><td>スネークケース</td><td>get_data</td><td>単語をアンダーバーで区切る</td></tr></tbody></table><p>言語によって記法の指定があったりなかったりしますが、Arduino言語で書くときに筆者は</p><table><thead><tr><th>対象</th><th>記法</th><th>例</th></tr></thead><tbody><tr><td>関数</td><td>ローワーキャメルケース</td><td>digitalWrite()</td></tr><tr><td>変数</td><td>ローワーキャメルケース</td><td>pushCount</td></tr><tr><td>定数</td><td>すべて大文字のスネークケース</td><td>SEG_PTN</td></tr></tbody></table><p>というふうにしています</p><h2 id=識別子名の言語>識別子名の言語</h2><p>Arduino言語でプログラムを記述する際に、関数名、変数名に日本語の文字を使うことは規則上は可能です<br>しかし、環境によってはコンパイルできない場合があるのでお勧めしません</p><p>また、関数名、変数名はローマ字ではなく、できれば<strong>英語をおすすめします</strong><br>理由としては、</p><ul><li>世界標準である</li><li>英語の勉強になる</li></ul><p>からです</p><p>また、単語はわかりやすいものを使うようにしましょう</p><h2 id=識別子名の具体性>識別子名の具体性</h2><p>識別子名にどこまで具体性を持たせるかによって、プログラムの可読性(人間にとっての読みやすさ)が変わってきます</p><p>どこまで具体性を持たせるかは、その識別子名がどのスコープで使われるかなどで決定します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> rad <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> answer_of_calculation <span style=color:#f92672>=</span> rad <span style=color:#f92672>*</span> rad <span style=color:#f92672>*</span> a;
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;%d&#34;</span>, answer_of_calculation);
</span></span></code></pre></div><p>上記の例は、円周率を3として半径2の円の面積を求めるプログラムですが、変数の命名があまりよろしくありません</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>; <span style=color:#75715e>// aが何を示しているのかわかりずらい
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> rad <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>; <span style=color:#75715e>// radian(ラジアン)と間違える可能性がある
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> answer_of_calculation <span style=color:#f92672>=</span> rad <span style=color:#f92672>*</span> rad <span style=color:#f92672>*</span> a; <span style=color:#75715e>// 1行しか使わないのに名前が長すぎる
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>printf(<span style=color:#e6db74>&#34;%d&#34;</span>, answer_of_calculation);
</span></span></code></pre></div><p>分かりやすく書き直してみたものが以下の例です</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> PI <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>; <span style=color:#75715e>// const を付けて定数にして、名前も大文字にする
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> radius <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>; <span style=color:#75715e>// radius(半径)にする
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> ans <span style=color:#f92672>=</span> radius <span style=color:#f92672>*</span> radius <span style=color:#f92672>*</span> PI; <span style=color:#75715e>// わかりやすく短い名前にする
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>printf(<span style=color:#e6db74>&#34;%d&#34;</span>, ans);
</span></span></code></pre></div><p>このように、簡潔な識別子名を付けることで、読み返しやすいプログラムを書くことができます</p><footer class=footline></footer></article><article class=default><h1 id=tips>tips</h1><h2 id=high-lowの書き換え>HIGH, LOWの書き換え</h2><p><code>HIGH</code>, <code>LOW</code> はぞれぞれArduinoライブラリ内で <code>1</code>, <code>0</code> と定義されているので、書き換えることができます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>digitalWrite(<span style=color:#ae81ff>5</span>, HIGH);
</span></span><span style=display:flex><span><span style=color:#75715e>//     ↓
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>1</span>);
</span></span></code></pre></div><p>書き換えることで二次元配列などの可読性が上がる場合があります</p><h2 id=クロックのタイミング>クロックのタイミング</h2><p>ステッピングモーター、DCモーターの信号入力部にはトランジスタアレイ(<a href=https://toshiba.semicon-storage.com/jp/semiconductor/product/linear-ics/transistor-arrays/detail.TD62783APG.html target=_blank>TD62783APG</a>)が使用されています</p><p>そのため、電圧が印加された瞬間に信号が流れます</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>1</span>); <span style=color:#75715e>// ここの時点で信号が流れる
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>delay(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>);
</span></span></code></pre></div><p>これを利用すると、ステッピングモーターなどのクロックの待ち時間の間に7セグメントを動作させることができ、7セグメントのちらつきや輝度の低下を防ぐことができます</p><h2 id=arduino言語とは>Arduino言語とは</h2><p>Arduino言語という表記でこのwikiでは統一していますが、Arduino言語の本質はC++言語です</p><p>Arduino IDEでプログラムをビルドすると、自動的に <code>Arduino.h</code> というヘッダファイルとリンクが行われます<br>この <code>Arduino.h</code> はArduinoを操作するための基本的なライブラリとなっていて、普段使う<a href=%e3%82%88%e3%81%8f%e4%bd%bf%e3%81%86%e9%96%a2%e6%95%b0#digitalwrite>digitalWrite</a>のような関数、<code>HIGH</code> 、<code>LOW</code> などの定数はこのライブラリに記述されています</p><footer class=footline></footer></article><article class=default><h1 id=サンプルコード集>サンプルコード集</h1><p>作る機会の多い関数のサンプルを集めました</p><p>参考にしてもらって構いませんが、<strong>まずは自分で考えることが大事です</strong></p><p>また、このサンプルのピンは Arduino MEGA を前提としているので、 UNO(小さいほう)を使うときは逐次書き換えてください</p><h2 id=クロック>クロック</h2><p><a href=https://jinnosukekato.github.io/monokon-wiki/hardware/about-parts/output-parts/stepper>ステッピングモーター</a>、
<a href=https://jinnosukekato.github.io/monokon-wiki/hardware/about-parts/output-parts/dc-motor>DCモーター</a>を回転させるときに使うクロックです</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>clock</span>() {
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    delay(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/delay>delay</a> の秒数を指定できるバージョン</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>clock</span>(<span style=color:#66d9ef>int</span> ms) {
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    delay(ms);
</span></span><span style=display:flex><span>    digitalWrite(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ステッピングモーター>ステッピングモーター</h2><p><a href=https://jinnosukekato.github.io/monokon-wiki/hardware/about-parts/output-parts/stepper>ステッピングモーター</a>を回転させる関数です</p><p>二次元配列をパターンに使用した例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>stepper</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> PTN[<span style=color:#ae81ff>4</span>][<span style=color:#ae81ff>4</span>] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    { <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span> },
</span></span><span style=display:flex><span>    { <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span> },
</span></span><span style=display:flex><span>    { <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span> },
</span></span><span style=display:flex><span>    { <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span> }
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>4</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> pin <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>; pin <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>15</span>; pin<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      digitalWrite(pin, PTN[i][pin <span style=color:#f92672>-</span> <span style=color:#ae81ff>12</span>]);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    clock();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ビットでパターンを作成した例 (暗記はしやすいかもしれない)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>stepper</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> PTN[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>=</span> { <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>9</span> }; <span style=color:#75715e>// 二進数に変換すると意味が分かる
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> p : PTN) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; j <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>4</span>; j<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      digitalWrite(j <span style=color:#f92672>+</span> <span style=color:#ae81ff>6</span>, (p <span style=color:#f92672>&gt;&gt;</span> j) <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    clock();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=7セグメント>7セグメント</h2><p><a href=https://jinnosukekato.github.io/monokon-wiki/hardware/about-parts/output-parts/seven-segment>7セグメント</a>を光らせるためのいろいろな関数です</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// 点灯パターン
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SEG_PTN[][<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  { <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span> },  <span style=color:#75715e>// 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  { <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span> },  <span style=color:#75715e>// 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  { <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span> },  <span style=color:#75715e>// 2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  { <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span> },  <span style=color:#75715e>// 3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  { <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span> },  <span style=color:#75715e>// 4
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  { <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span> },  <span style=color:#75715e>// 5
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  { <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span> },  <span style=color:#75715e>// 6
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  { <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span> },  <span style=color:#75715e>// 7
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  { <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span> },  <span style=color:#75715e>// 8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  { <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span> },  <span style=color:#75715e>// 9
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  { <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span> },  <span style=color:#75715e>// 空白(リセット用)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 信号だけ送る関数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>seg</span>(<span style=color:#66d9ef>int</span> num) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>; i <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>18</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    digitalWrite(i, SEG_PTN[num][i <span style=color:#f92672>-</span> <span style=color:#ae81ff>12</span>]);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 左側だけ光らせる関数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>segL</span>(<span style=color:#66d9ef>int</span> num) {
</span></span><span style=display:flex><span>  seg(<span style=color:#ae81ff>10</span>);  <span style=color:#75715e>//残像防止
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  digitalWrite(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  digitalWrite(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  seg(num);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 右側だけ光らせる関数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>segR</span>(<span style=color:#66d9ef>int</span> num) {
</span></span><span style=display:flex><span>  seg(<span style=color:#ae81ff>10</span>);  <span style=color:#75715e>//残像防止
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  digitalWrite(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  digitalWrite(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  seg(num);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 両方を指定した時間光らせる関数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>segW</span>(<span style=color:#66d9ef>int</span> l, <span style=color:#66d9ef>int</span> r, <span style=color:#66d9ef>int</span> duration) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;=</span> duration; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (i <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>      segL(l);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      segR(r);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    delay(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ステッピングモーターと7セグメント>ステッピングモーターと7セグメント</h2><p>県大会レベルでは一番の難関だと思うので、あえてここにはコードを書きませんが、ヒントは</p><ul><li>ステッピングモータのクロックの前に余計な信号を入れないこと</li><li>ステッピングモータのクロックの間も7セグメントを点灯させること</li></ul><p>です</p><p>どうしてもコードが見たければ以下のリポジトリに書いてあるので見てください
<a href=https://github.com/jinnosukeKato/Monokon-Kanagawa-2022 target=_blank>https://github.com/jinnosukeKato/Monokon-Kanagawa-2022</a></p><h2 id=押して離されたらバンプ>押して離されたら(バンプ)</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SW <span style=color:#f92672>=</span> <span style=color:#ae81ff>22</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>loop</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span>(digitalRead(SW) <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ここに押されている間の待機動作
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span>(digitalRead(SW) <span style=color:#f92672>!=</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// ここには離されたときに動作する内容
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><footer class=footline></footer></article></section><article class=home><h1 id=ハードウェア>ハードウェア</h1><p>このセクションでは、ハードウェアについて解説します</p><footer class=footline></footer></article><section><h1 class=a11y-only>ハードウェアのサブセクション</h1><article class=default><h1 id=部品解説>部品解説</h1><p>このセクションでは各部品について、その動作や制御方法を解説します</p><footer class=footline></footer></article><section><h1 class=a11y-only>部品解説のサブセクション</h1><article class=default><h1 id=出力部品>出力部品</h1><p>このセクションでは出力部品について、その動作や制御方法を解説します</p><footer class=footline></footer></article><section><h1 class=a11y-only>出力部品のサブセクション</h1><article class=default><h1 id=7セグメント>7セグメント</h1><h2 id=説明>説明</h2><p>7つのセグメント(棒)と小数点の点灯を切り替えることで、数字や文字を表示することができます</p><p>制御対象基盤には2つ取り付けてあり、指定のピンに信号を送ることで各7セグメントの表示のON/OFFを切り替えることができます</p><h2 id=制御方法>制御方法</h2><p>各セグメントには9つのピンがあり、2つ合計で18個のピンを使用します</p><p>9つのうち1つは表示の切り替え(ON/OFF)に使用し、残りの8つで各セグメントと小数点のON/OFFを切り替えます</p><p>セグメントのピン配置は一番上の横棒、右上、右下と時計回りに配置されており、最後は中央横棒、小数点となっています</p><p>ステッピングモーターと同じように、二次元配列にパターンを格納することを推奨します</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// パターン例
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SEG_PTN[][<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>}, <span style=color:#75715e>// 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    {<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>}, <span style=color:#75715e>// 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    {<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>}, <span style=color:#75715e>// 2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// 省略
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    {<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>}, <span style=color:#75715e>// 9
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    {<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>} <span style=color:#75715e>// リセット
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span><span style=color:#75715e>// リセットを入れると便利
</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=dcモーター>DCモーター</h1><h2 id=説明>説明</h2><p>DCモーターは回る、止まるの動作のみをする基本的なモーターです</p><p>プログラムで、回転する方向、速度、停止の素早さを制御できます</p><h3 id=制御方法>制御方法</h3><p>2つのピンとクロックで制御します</p><table><thead><tr><th>ピン1</th><th>ピン2</th><th>動作</th></tr></thead><tbody><tr><td>LOW</td><td>LOW</td><td>緩やかな停止</td></tr><tr><td>HIGH</td><td>HIGH</td><td>急停止</td></tr><tr><td>HIGH</td><td>LOW</td><td>回転</td></tr><tr><td>LOW</td><td>HIGH</td><td>逆回転</td></tr></tbody></table><footer class=footline></footer></article><article class=default><h1 id=ステッピングモーター>ステッピングモーター</h1><h2 id=説明>説明</h2><p>ステッピングモーターは回転する角度を調節できるモーターです</p><p>プログラムで、回転する方向、角度、速度を調節することができます</p><h2 id=制御方法>制御方法</h2><p>4つのピンとクロックで制御します</p><table><thead><tr><th>ピン1</th><th>ピン2</th><th>ピン3</th><th>ピン4</th></tr></thead><tbody><tr><td>HIGH</td><td>HIGH</td><td>LOW</td><td>LOW</td></tr><tr><td>LOW</td><td>HIGH</td><td>HIGH</td><td>LOW</td></tr><tr><td>LOW</td><td>LOW</td><td>HIGH</td><td>HIGH</td></tr><tr><td>HIGH</td><td>LOW</td><td>LOW</td><td>HIGH</td></tr></tbody></table><p>パターンを二次元配列に格納して <code>for</code> 文などで値を取り出すと簡潔なプログラムにすることができます</p><footer class=footline></footer></article><article class=default><h1 id=ブザー>ブザー</h1><h2 id=説明>説明</h2><p>ブザーは一定の周波数の音を鳴らすことができます</p><p>プログラムで周波数、音を鳴らす長さを指定することができます</p><h2 id=制御方法>制御方法</h2><p>Arduino言語に含まれている <a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/tone><code>tone</code></a> 関数を使用することで周波数、音を鳴らす秒数を指定することができます</p><p>また、 <a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/notone><code>noTone</code></a> 関数を使用することで音を消すこともできます</p><footer class=footline></footer></article></section><article class=default><h1 id=入力部品>入力部品</h1><p>このセクションでは入力部品について、その動作や制御方法を解説します</p><footer class=footline></footer></article><section><h1 class=a11y-only>入力部品のサブセクション</h1><article class=default><h1 id=タクトスイッチ>タクトスイッチ</h1><h2 id=説明>説明</h2><p>押している間のみ通電する、最も単純なスイッチです<br>入力基盤によって、プルアップ・プルダウンがあるので注意しましょう</p><h2 id=使用方法>使用方法</h2><p><a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/digitalread><code>digitalRead</code></a> 関数を用いて値を読み取ります</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>if</span> (digitalRead(<span style=color:#960050;background-color:#1e0010>ピン番号</span>) <span style=color:#f92672>==</span> HIGH) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// HIGHの時の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// LOWの時の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=ホトカプラ>ホトカプラ</h1><h2 id=説明>説明</h2><p>明るさを読み取ることができるセンサーです</p><h2 id=使用方法>使用方法</h2><p><a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/digitalread><code>digitalRead</code></a> 関数を使用すると <code>HIGH</code> / <code>LOW</code> で値を読み取ることができます</p><p><a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/analogread><code>analogRead</code></a> 関数を使用するとアナログ値で読み取ることができます</p><p>明るさの具合で処理を変更する問題は出題されないので、 <a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/digitalread><code>digitalRead</code></a> 関数を使用することが一般的です</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>if</span> (digitalRead(<span style=color:#960050;background-color:#1e0010>ピン番号</span>) <span style=color:#f92672>==</span> HIGH) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// HIGHの時の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// LOWの時の処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><footer class=footline></footer></article><article class=default><h1 id=可変抵抗>可変抵抗</h1><h2 id=説明>説明</h2><p>軸がどれだけ回転されられたかを読み取ることができます</p><p>出力値は、0から1023の1024段階で出力されます</p><h2 id=使用方法>使用方法</h2><p><a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/digitalread><code>digitalRead</code></a> 関数を使用すると <code>HIGH</code> / <code>LOW</code> で値を読み取ることができます</p><p><a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/analogread><code>analogRead</code></a> 関数を使用するとアナログ値で読み取ることができます</p><p>あまりHIGH/LOWで読み取るような問題は出題されないので <a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/analogread><code>analogRead</code></a> 関数を使用することが一般的です</p><h2 id=サンプルコード>サンプルコード</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#66d9ef>int</span> volume <span style=color:#f92672>=</span> analogRead(<span style=color:#960050;background-color:#1e0010>ピン番号</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (volume <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>500</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 中央より下の値のときの処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>if</span>(volume <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>524</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 中央付近のときの処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 中央より上の値のときの処理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><footer class=footline></footer></article></section></section><article class=default><h1 id=接続図>接続図</h1><p>このページでは、<strong>県大会</strong>で使用するハードウェアについて解説します</p><h2 id=制御の流れ>制御の流れ</h2><p>ものコンでは <strong>制御対象装置</strong> 、 <strong>入力回路基板</strong> と制御用コンピューターを接続して問題を解きます</p><p>制御用コンピューターには指定はありませんが、Arduino (Uno, Mega) を使用しています</p><p>PCからArduinoへArduino IDEを用いてプログラムを書き込み、実行します</p><p><a href=#image-7bf0f17efaf858ea879b919451d6ad96 class=lightbox-link><img src=https://jinnosukekato.github.io/monokon-wiki/connections.svg alt=機器接続図 style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-7bf0f17efaf858ea879b919451d6ad96><img src=https://jinnosukekato.github.io/monokon-wiki/connections.svg alt=機器接続図 class=lightbox-image loading=lazy></a></p><h2 id=制御対象装置>制御対象装置</h2><p>制御対象装置には、</p><ul><li>DCモーター</li><li>ステッピングモーター</li><li>ブザー</li><li>7セグメント x2個</li></ul><p>以上のパーツがついています</p><h2 id=入力回路基板>入力回路基板</h2><p>入力回路基板には</p><ul><li>タクトスイッチ</li><li>ホトカプラ</li><li>可変抵抗</li></ul><p>以上のパーツがついています</p><footer class=footline></footer></article><article class=default><h1 id=ピン対応表>ピン対応表</h1><h2 id=arduino-mega-大きいほう>Arduino Mega (大きいほう)</h2><p>連絡いただければ基盤データは渡します</p><table><thead><tr><th>ピン番号</th><th>接続先</th><th>メモ</th></tr></thead><tbody><tr><td>1</td><td>Vcc</td><td></td></tr><tr><td>2</td><td>7セグ左ON/OFF</td><td></td></tr><tr><td>3</td><td>7セグ右ON/OFF</td><td></td></tr><tr><td>4</td><td>ブザー</td><td><a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/tone>tone</a>で鳴らしてください</td></tr><tr><td>5</td><td>クロック</td><td>DCモーター/ステッピングモーター使用時に入力必須</td></tr><tr><td>6</td><td>オプション6-2</td><td>未使用 CN6と書いてあるピン</td></tr><tr><td>7</td><td>オプション6-3</td><td>〃</td></tr><tr><td>8</td><td>オプション6-4</td><td>〃</td></tr><tr><td>9</td><td>オプション6-5</td><td>〃</td></tr><tr><td>10</td><td>GND</td><td></td></tr><tr><td>11</td><td>Vcc</td><td></td></tr><tr><td>12</td><td>7セグ/ステッピング</td><td>7セグのピンは一番上の横棒から時計回り</td></tr><tr><td>13</td><td>7セグ/ステッピング</td><td></td></tr><tr><td>14</td><td>7セグ/ステッピング</td><td></td></tr><tr><td>15</td><td>7セグ/ステッピング</td><td></td></tr><tr><td>16</td><td>7セグ/DCモータ</td><td></td></tr><tr><td>17</td><td>7セグ/DCモータ</td><td></td></tr><tr><td>18</td><td>7セグ</td><td>中央横棒</td></tr><tr><td>19</td><td>7セグ</td><td>小数点</td></tr><tr><td>20</td><td>GND</td><td></td></tr><tr><td>22</td><td>製作基盤入力</td><td>digitalRead用</td></tr><tr><td>24</td><td>製作基盤入力</td><td>〃</td></tr><tr><td>26</td><td>製作基盤入力</td><td>〃</td></tr><tr><td>A0</td><td>製作基盤入力</td><td>analogRead用</td></tr><tr><td>A1</td><td>製作基盤入力</td><td>〃</td></tr><tr><td>A2</td><td>製作基盤入力</td><td>〃</td></tr></tbody></table><h2 id=arduino-uno-小さいほう>Arduino Uno (小さいほう)</h2><p><a href=https://github.com/jinnosukeKato/Monokon-Shield-For-Arduino-Uno-R3 target=_blank>基板データ</a></p><table><thead><tr><th>ピン番号</th><th>接続先</th><th>メモ</th></tr></thead><tbody><tr><td>2</td><td>7セグ左ON/OFF</td><td></td></tr><tr><td>3</td><td>7セグ右ON/OFF</td><td></td></tr><tr><td>4</td><td>ブザー</td><td><a href=https://jinnosukekato.github.io/monokon-wiki/software/embedded-functions/tone>tone</a>で鳴らしてください</td></tr><tr><td>5</td><td>クロック</td><td>DCモーター/ステッピングモーター使用時に入力必須</td></tr><tr><td>6</td><td>7セグ/ステッピング</td><td>7セグのピンは一番上の横棒から時計回り</td></tr><tr><td>7</td><td>7セグ/ステッピング</td><td></td></tr><tr><td>8</td><td>7セグ/ステッピング</td><td></td></tr><tr><td>9</td><td>7セグ/ステッピング</td><td></td></tr><tr><td>10</td><td>7セグ/DCモーター</td><td></td></tr><tr><td>11</td><td>7セグ/DCモーター</td><td></td></tr><tr><td>12</td><td>7セグ</td><td>中央横棒</td></tr><tr><td>13</td><td>7セグ</td><td>小数点</td></tr><tr><td>14</td><td>製作基盤入力</td><td>digitalRead用</td></tr><tr><td>15</td><td>製作基盤入力</td><td>〃</td></tr><tr><td>16</td><td>製作基盤入力</td><td>〃</td></tr><tr><td>A0</td><td>製作基盤入力</td><td>analogRead用</td></tr><tr><td>A1</td><td>製作基盤入力</td><td>〃</td></tr><tr><td>A2</td><td>製作基盤入力</td><td>〃</td></tr></tbody></table><footer class=footline></footer></article></section><article class=default><h1 id=問題集>問題集</h1><p>県大会レベルの例題をいくつか作題して載せておくので解いてみてください</p><p><a href=#%e3%83%ac%e3%83%99%e3%83%ab0>レベル0</a>から順に難易度が上がっていきます</p><p>また、並行して過去問も解いてみましょう</p><p>すべて解き終わってしまったら、関東大会の過去問にチャレンジしてみてください</p><hr><h2 id=レベル0>レベル0</h2><h3 id=7セグメント部分点灯>7セグメント部分点灯</h3><ol><li>電源投入後、<strong>右側の7セグメントが<code>-</code>と表示</strong>する。(中央横棒)</li><li><strong>1秒後</strong>、<strong>右側の7セグメントは1秒間消灯</strong>し、それを繰り返す。</li></ol><hr><h2 id=レベル1>レベル1</h2><h3 id=ブザー>ブザー</h3><ol><li>電源投入後、ブザーが<strong>1秒間高い音</strong>で鳴音する。</li><li>その後、<strong>低い音で2秒間</strong>鳴音する。これを繰り返す。</li></ol><h3 id=ステッピングモーター回転>ステッピングモーター回転</h3><ol><li>電源投入後、ステッピングモーターが<strong>時計回りに2秒間回転</strong>する。</li><li>その後<strong>1秒間停止</strong>したのち、最初に戻り、繰り返す。</li></ol><h3 id=7セグメント片側点灯>7セグメント片側点灯</h3><ol><li>電源投入後、<strong>右側の7セグメントが<code>1</code>を表示</strong>する。</li><li><strong>1秒後</strong>、<strong>右側の7セグメントは消灯</strong>し、<strong>左側の7セグメントが<code>7</code>と表示</strong>する。</li><li><strong>2秒後</strong>、<strong>両方のセグメントが消灯</strong>しつづける。</li></ol><hr><h2 id=レベル2>レベル2</h2><h3 id=dcモーター低速回転>DCモーター低速回転</h3><ol><li>電源投入後、DCモーターが<strong>時計回りに2秒間高速回転</strong>する。</li><li>その後、<strong>反時計回りに低速回転</strong>し、2秒間隔でこれを繰り返す。</li></ol><h3 id=ステッピングモーター角度指定回転>ステッピングモーター角度指定回転</h3><ol><li>電源投入後、ステッピングモーターが<strong>右回りに回転</strong>する。</li><li><strong>180度回転</strong>したのち、<strong>1秒間停止</strong>する。</li><li>その後、<strong>180度反時計回りに回転</strong>し、これを繰り返す。</li></ol><h3 id=タクトスイッチで動作を切り替え>タクトスイッチで動作を切り替え</h3><ol><li>タクトスイッチが<strong>押されている間</strong>、ブザーが鳴音する。</li><li>タクトスイッチが押されていない間はブザーは鳴音しない。</li></ol><h3 id=7セグメント両側点灯>7セグメント両側点灯</h3><ol><li>電源投入後、左側の7セグメントが<code>0</code>、右側の7セグメントが<code>6</code>を表示し続ける。</li></ol><h3 id=タクトスイッチとホトカプラで動作を切り替え>タクトスイッチとホトカプラで動作を切り替え</h3><ol><li>電源投入後、すべての部品は動作しない。</li><li>タクトスイッチが押されている間、DCモーターが<strong>左回転</strong>する。</li><li>タクトスイッチが離されるとDCモーターは<strong>停止</strong>する。</li><li>ホトカプラが遮光されるとブザーが<strong>低い音</strong>で鳴音する。</li><li>タクトスイッチが押されている間にホトカプラが遮光されるとブザーが<strong>高い音</strong>で鳴音し、DCモーターが<strong>右回転</strong>する。</li></ol><hr><h2 id=レベル3>レベル3</h2><h3 id=dcモーター回転と7セグメント両側点灯>DCモーター回転と7セグメント両側点灯</h3><ol><li>電源投入後、DCモーターが<strong>時計回りに回転</strong>する。</li><li>タクトスイッチが押されている間、<strong>7セグメントが<code>0 1</code>と表示</strong>する。表示している間、DCモーターは<strong>反時計回りに回転</strong>する。</li></ol><h3 id=ステッピングモーターと7セグメント片側点灯>ステッピングモーターと7セグメント片側点灯</h3><ol><li>電源投入後、ステッピングモーターは<strong>時計回りに回転</strong>する。</li><li>ステッピングモーターが一回転するごとに右側の7セグメントは<code>0</code>から数字を<strong>1ずづ増やしていく</strong>。</li><li>7セグメントが<code>9</code>を表示するとステッピングモーターは回転を止め、右側の7セグメントは<code>9</code>を<strong>表示し続ける</strong>。</li></ol><hr><h2 id=レベル4>レベル4</h2><h3 id=7セグメント両側とステッピングモーターの組み合わせ>7セグメント両側とステッピングモーターの組み合わせ</h3><ol><li>電源投入後、ステッピングモーターは<strong>反時計回りに回転</strong>し、左側の7セグメントは消灯、右側は<code>0</code>を表示する。</li><li>ステッピングモーターが一回転するごとに7セグメントは<code>0</code>から数字を<strong>1ずづ増やしていく</strong>。</li><li>7セグメントが<code>99</code>を表示するとステッピングモーターは<strong>回転を止め</strong>、右側の7セグメントは<code>99</code>を<strong>表示し続ける</strong>。</li></ol><h3 id=7セグメントとdcモーター低速回転>7セグメントとDCモーター低速回転</h3><ol><li>電源投入後、7セグメントは<code>--</code>と表示し、DCモーターは停止する。</li><li>タクトスイッチが押されると、7セグメントは<code>HI</code>と表示し、DCモーターは<strong>高速で回転</strong>する。</li><li>タクトスイッチがもう一度押されると、7セグメントは<code>LO</code>と表示し、DCモーターは<strong>低速で回転</strong>する。</li><li>さらにもう一度タクトスイッチが押されると、動作状態は1に戻る。</li></ol><hr><h2 id=全問解き終わった人へ>全問解き終わった人へ</h2><p>関東大会や全国大会の過去問も解いてみてください<br>(参考: H25~H29までの過去問(基盤が違うので問題のテイスト確認用))
<a href="http://www.zenjouken.com/index.php?key=jobecwus6-146#" target=_blank>http://www.zenjouken.com/index.php?key=jobecwus6-146#</a></p><footer class=footline></footer></article><article class=default><h1 id=動かないときは>動かないときは</h1><p><strong>エラーコードが出てるときはエラーコードを読む！</strong></p><p>エラーコードは赤色で、英語で、よくわからなくて、怖いかもしれませんが、恐れることはありません<br>エラーコードと仲良くなりましょう</p><p>このページを読んでも分からないときは、ほかの部員に相談しましょう</p><h2 id=とにかく動かないとき>とにかく動かないとき</h2><div class="mermaid align-center">flowchart TD
Root(["動かない！"]) --> CanCompile{"コンパイルが通るか"};
CanCompile -- yes --> Program{"プログラムの内容は正しいか\n(分からなければ他人に読んでもらう)"};
CanCompile -- no --> USBConnection{"PCとArduinoが接続されているか"};
USBConnection -- yes --> PortSetting{"ポートの指定は正しいか"};
PortSetting -- yes -->SyntaxErr["プログラムの構文が正しくない\nエラーコードを読んで修正"];
PortSetting -- no --> ChangePort["ポートの指定を直す"];
USBConnection -- no --> ConnectUSB["USBを接続する"];
Program -- yes --> Hardware;
Program -- no --> 正しいプログラムを書く;
Hardware["ハードウェアに\n問題がある可能性が高い"] --> PowerOkay{"電源が接続されているか"};
PowerOkay -- yes --> TapOkay{"電源タップに通電しているか"};
PowerOkay -- no --> PowerTurnOn["電源を接続する"];
TapOkay -- yes --> ActOtherPart{"動かない部品は一つか"};
TapOkay -- no --> ConnectTap["タップを接続する"];
ActOtherPart -- yes --> IsConnectionErr{"ワイヤーが断線しているか"};
IsConnectionErr -- yes --> ConnectionErr;
IsConnectionErr -- no --> PartFailure["パーツもしくは\nICが故障している"];
ActOtherPart -- no --> IsPluralPartsFailure{"すべてのパーツが動かないか"};
IsPluralPartsFailure -- yes --> IsArduinoErr{"Arduinoと\n制御対象基盤との\n接続はできているか"};
IsPluralPartsFailure -- no --> IcFailure["制御対象基盤の\nICか回路の故障が疑わしい"];
IsArduinoErr -- yes --> ArduinoErr;
IsArduinoErr -- no --> ConnectionErr;
ArduinoErr["Arduinoの故障が疑われる"]
ConnectionErr["基板or部品間の接続を直す"]</div><h2 id=プログラムのどこが間違っているかわからないとき>プログラムのどこが間違っているかわからないとき</h2><div class="mermaid align-center">flowchart TD
ROOT["動かない！"] --> ExplainToTheDuckRoopS;
ExplainToTheDuckRoopS[/"一行ずつ読む"\] --> ExPlainToTheDuck;
ExPlainToTheDuck["誰かに説明するようにじっくり読む"] --> CheckSyntaxErr;
CheckSyntaxErr{"間違っている箇所を発見した"};
CheckSyntaxErr -- yes --> Fix["修正する"] --> Run;
Run{"正しく動作するか"};
Run -- yes --> End["修正完了"];
Run -- no --> ROOT;
CheckSyntaxErr -- no --> ExplainToTheDuckRoopE[\全文読んだ/];
ExplainToTheDuckRoopE -- yes --> 他人に相談;
ExplainToTheDuckRoopE -- no --> ExplainToTheDuckRoopS;</div><footer class=footline></footer></article></section></div></main></div><script src=https://jinnosukekato.github.io/monokon-wiki/js/clipboard.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/perfect-scrollbar.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/d3/d3-color.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/d3/d3-dispatch.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/d3/d3-drag.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/d3/d3-ease.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/d3/d3-interpolate.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/d3/d3-selection.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/d3/d3-timer.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/d3/d3-transition.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/d3/d3-zoom.min.js?1680689941 defer></script>
<script src=https://jinnosukekato.github.io/monokon-wiki/js/mermaid.min.js?1680689941 defer></script>
<script>window.themeUseMermaid=JSON.parse("{}")</script><script src=https://jinnosukekato.github.io/monokon-wiki/js/theme.js?1680689941 defer></script></body></html>